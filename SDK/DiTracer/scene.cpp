#include "scene.h"

Scene::Scene() {
	camera = new Camera();
	cube = new Cube();
}

//**************************************************************************************************************************
//**************************************************************************************************************************

Scene::~Scene() {
	if (camera) {
		delete camera;
		camera = NULL;
	}

	if (cube) {
		delete cube;
		cube = NULL;
	}
}

//**************************************************************************************************************************
//**************************************************************************************************************************

Camera* Scene::getCamera() const {
	return camera;
}

//**************************************************************************************************************************
//**************************************************************************************************************************

Cube* Scene::getCube() const {
	return cube;
}

//**************************************************************************************************************************
//**************************************************************************************************************************

void Scene::setCamera(Camera* camera) {
	this->camera = camera;
}

//**************************************************************************************************************************
//**************************************************************************************************************************

void Scene::setCube(Cube* cube) {
	this->cube = cube;
}

//**************************************************************************************************************************
//**************************************************************************************************************************

void Scene::setupCameraForRendering(RTcontext* context) {
	camera->setCamEye(DEFAULT_CAEMRA_EYE);
	camera->setLookAt(DEFAULT_CAMERA_LOOK_AT);
	camera->setUpVector(DEFAULT_CAMERA_UP_VECTOR);
	camera->setFov(DEFAULT_CAMERA_FOV);

	camera->computeAspectRatio();

	camera->prepareGPUVariables(context);
	camera->prepareGPUPrograms(context);
}

//**************************************************************************************************************************
//**************************************************************************************************************************

void Scene::setupCubeForRendering(RTcontext* context) {
	cube->setBottom(CUBE_BOTTOM);
	cube->setTop(CUBE_TOP);

	cube->prepareGPUVariables(context);
	cube->prepareGPUPrograms(context);
}
